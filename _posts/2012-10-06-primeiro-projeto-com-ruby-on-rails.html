---
layout: post
status: publish
published: true
title: Primeiro Projeto com Ruby on Rails
author:
  display_name: Glauco Custodio
date: '2012-10-06 15:45:34 -0300'
date_gmt: '2012-10-06 15:45:34 -0300'
categories:
- Ruby
tags:
- ruby on rails
comments:
- id: 47
  author: Eric Hideki
  author_email: hidekinhow@hotmail.com
  author_url: http://erichideki.tumblr.com
  date: '2012-10-07 00:55:50 -0300'
  date_gmt: '2012-10-07 00:55:50 -0300'
  content: "Parab&eacute;ns pelo Post, com imagens ilustrando os passos bem definidos
    e claros. Bem legal.\r\n\r\nAbra&ccedil;o."
- id: 62
  author: Dimas Daros
  author_email: edimar.daros@gmail.com
  author_url: ''
  date: '2012-10-28 15:40:33 -0200'
  date_gmt: '2012-10-28 15:40:33 -0200'
  content: "Estou reunindo material para aprender rails aqui, est&aacute; sendo de
    grande ajuda, artigo muito bom.\r\n\r\nVoc&ecirc; recomenda fortemente aprender
    Ruby primeiro, ou da para cair direto no Rails mesmo?\r\n\r\nMas j&aacute; deixo
    meu agradecimento pelo post\r\nabra&ccedil;o\r\nat&eacute; mais."
- id: 63
  author: Glauco Cust&oacute;dio
  author_email: glauco.custodio@gmail.com
  author_url: http://glaucocustodio.com
  date: '2012-10-29 10:44:11 -0200'
  date_gmt: '2012-10-29 10:44:11 -0200'
  content: "Dimas, eu recomendo aprender um pouco de Ruby primeiro, alguns conceitos
    s&atilde;o essenciais para voc&ecirc; entender o que est&aacute; fazendo de verdade.
    Sabendo um pouco aumentar&aacute; muito sua produtividade, agora o resto vem com
    o tempo e experi&ecirc;ncia.\r\n\r\nAbra&ccedil;o!"
- id: 67
  author: Evandro Ribeiro
  author_email: ribeiroevandro@live.com
  author_url: http://www.facebook.com/ribeiroevandro
  date: '2012-11-05 05:20:21 -0200'
  date_gmt: '2012-11-05 05:20:21 -0200'
  content: Dimas, assim como o Glauco comentou, aprender o Ruby &eacute; importante,
    porque assim como no PHP ou outras linguagens, ir para o Framework sem um conhecimento
    mesmo que b&aacute;sico da linguagem por tr&aacute;s dele, al&eacute;m de ser
    uma p&eacute;ssima pr&aacute;tica, n&atilde;o ser&aacute; nada vantajoso pra voc&ecirc;,
    podendo at&eacute; se tornar frustrante caso precise de algo e n&atilde;o consiga
    por faltar a base.
- id: 697
  author: Marcio Vinicius Silva
  author_email: marciovinicius55@yahoo.com.br
  author_url: http://www.marcioweb.com.br
  date: '2013-06-11 19:45:09 -0300'
  date_gmt: '2013-06-11 19:45:09 -0300'
  content: Cara &oacute;timo post!! Eu pretendo iniciar com o Rails em breve, mas
    antes estou estudando no codecademy.com. Voc&ecirc; acha que com o conhecimento
    que &eacute; passado por eles &eacute; o suficiente para entrar no Rails? (Estou
    olhando o curso de Ruby deles)
- id: 1526
  author: W&eacute;lita
  author_email: welithaborges@yahoo.com.br
  author_url: ''
  date: '2013-12-07 03:05:40 -0200'
  date_gmt: '2013-12-07 03:05:40 -0200'
  content: "Fiz passo a passo, pois ao criar minha aplica&ccedil;&atilde;o e tentar
    rodar o servidor apresentava o mesmo erro, por&eacute;m mesmo inserindo a instru&ccedil;&atilde;o
    gem &ldquo;therubyracer&rdquo; no arquivo Gemfile , e posteriormente dentro da
    pasta do projeto efetuando o comando \"bundle install\". Apresentou o seguinte
    erro:\r\n\r\n\r\nC:\\Sites\\hello>bundle install\r\nFetching gem metadata from
    https:&#47;&#47;rubygems.org&#47;..........\r\nFetching gem metadata from https:&#47;&#47;rubygems.org&#47;..\r\nResolving
    dependencies...\r\nUsing rake (10.1.0)\r\nUsing i18n (0.6.9)\r\nUsing minitest
    (4.7.5)\r\nUsing multi_json (1.8.2)\r\nUsing atomic (1.1.14)\r\nUsing thread_safe
    (0.1.3)\r\nUsing tzinfo (0.3.38)\r\nUsing activesupport (4.0.0)\r\nUsing builder
    (3.1.4)\r\nUsing erubis (2.7.0)\r\nUsing rack (1.5.2)\r\nUsing rack-test (0.6.2)\r\nUsing
    actionpack (4.0.0)\r\nUsing mime-types (1.25.1)\r\nUsing polyglot (0.3.3)\r\nUsing
    treetop (1.4.15)\r\nUsing mail (2.5.4)\r\nUsing actionmailer (4.0.0)\r\nUsing
    activemodel (4.0.0)\r\nUsing activerecord-deprecated_finders (1.0.3)\r\nUsing
    arel (4.0.1)\r\nUsing activerecord (4.0.0)\r\nUsing bundler (1.3.5)\r\nUsing coffee-script-source
    (1.6.3)\r\nUsing execjs (2.0.2)\r\nUsing coffee-script (2.2.0)\r\nUsing thor (0.18.1)\r\nUsing
    railties (4.0.0)\r\nUsing coffee-rails (4.0.1)\r\nUsing hike (1.2.3)\r\nUsing
    jbuilder (1.5.3)\r\nUsing jquery-rails (3.0.4)\r\nUsing json (1.8.1)\r\nInstalling
    libv8 (3.16.14.3)\r\nGem::Installer::ExtensionBuildError: ERROR: Failed to build
    gem native extension\r\n.\r\n\r\nC:&#47;RailsInstaller&#47;Ruby1.9.3&#47;bin&#47;ruby.exe
    extconf.rb \r\ncreating Makefile\r\nO sistema n&atilde;o pode encontrar o caminho
    especificado.\r\nO sistema n&atilde;o pode encontrar o caminho especificado.\r\nO
    sistema n&atilde;o pode encontrar o caminho especificado.\r\nC:&#47;RailsInstaller&#47;Ruby1.9.3&#47;lib&#47;ruby&#47;gems&#47;1.9.1&#47;gems&#47;libv8-3.16.14.3&#47;ext&#47;libv8&#47;b\r\nuilder.rb:58:in
    `setup_python!': libv8 requires python 2 to be installed in orde\r\nr to build,
    but it is currently not available (RuntimeError)\r\n        from C:&#47;RailsInstaller&#47;Ruby1.9.3&#47;lib&#47;ruby&#47;gems&#47;1.9.1&#47;gems&#47;libv8-3.16.14.\r\n3&#47;ext&#47;libv8&#47;builder.rb:42:in
    `block in build_libv8!'\r\n        from C:&#47;RailsInstaller&#47;Ruby1.9.3&#47;lib&#47;ruby&#47;gems&#47;1.9.1&#47;gems&#47;libv8-3.16.14.\r\n3&#47;ext&#47;libv8&#47;builder.rb:40:in
    `chdir'\r\n        from C:&#47;RailsInstaller&#47;Ruby1.9.3&#47;lib&#47;ruby&#47;gems&#47;1.9.1&#47;gems&#47;libv8-3.16.14.\r\n3&#47;ext&#47;libv8&#47;builder.rb:40:in
    `build_libv8!'\r\n        from C:&#47;RailsInstaller&#47;Ruby1.9.3&#47;lib&#47;ruby&#47;gems&#47;1.9.1&#47;gems&#47;libv8-3.16.14.\r\n3&#47;ext&#47;libv8&#47;location.rb:24:in
    `install!'\r\n        from extconf.rb:7:in `'\r\n\r\n\r\nGem files will remain
    installed in C:&#47;RailsInstaller&#47;Ruby1.9.3&#47;lib&#47;ruby&#47;gems&#47;1.9\r\n.1&#47;gems&#47;libv8-3.16.14.3
    for inspection.\r\nResults logged to C:&#47;RailsInstaller&#47;Ruby1.9.3&#47;lib&#47;ruby&#47;gems&#47;1.9.1&#47;gems&#47;libv8-3.1\r\n6.14.3&#47;ext&#47;libv8&#47;gem_make.out\r\nAn
    error occurred while installing libv8 (3.16.14.3), and Bundler cannot\r\ncontinue.\r\nMake
    sure that `gem install libv8 -v '3.16.14.3'` succeeds before bundling.\r\n\r\nC:\\Sites\\hello>rails
    server\r\n&larr;[31mCould not find gem 'therubyracer (>= 0) x86-mingw32' in the
    gems available\r\non this machine.&larr;[0m\r\n&larr;[33mRun `bundle install`
    to install missing gems.&larr;[0m"
- id: 1615
  author: Matheus
  author_email: matheuschimelli@live.com
  author_url: http://codeblock.tk
  date: '2014-02-06 15:39:45 -0200'
  date_gmt: '2014-02-06 15:39:45 -0200'
  content: Estou aprendendo Ruby on Rails agora, e este tutorial foi muito bom.Gostaria
    de saber se voc&ecirc; poderia fazer um tutorial de como configurar um aplica&ccedil;&atilde;o
    Rail no cpanel, editando os arquivos no diret&oacute;rio do site.Obrigado, e parab&eacute;ns
    pelo post
- id: 41885
  author: Diego
  author_email: diegotechinfo@gmail.com
  author_url: ''
  date: '2015-09-23 14:55:30 -0300'
  date_gmt: '2015-09-23 14:55:30 -0300'
  content: "Bom dia Glauco.\r\nAgradeco sua disposicao de explicar muito bem as primeiras
    \r\nconfiguracoes da instalacao e preparacao do Ruby para um primeiro\r\nprojeto.\r\nTenho
    um problema, que gostaria de compartilhar, e se for possivel\r\nvoce me ajudar
    ficarei grato.\r\nO que acontece eh que quando vou usar o comando rake db:create
    tenho o seguinte erro:\r\n\r\n\"Sorry, you can't use byebug without Readline.
    To solve this, you need to\r\n    rebuild Ruby with Readline support. If using
    Ubuntu, try `sudo apt-get\r\n    install libreadline-dev` and then reinstall your
    Ruby.\r\nrake aborted!\r\n\"\r\n\r\nEsse erro se refere a falta de uma biblioteca,
    mas eu ja a instalei, e realizei o procedimento sugerido pelo sistema. Esta rodando
    em Ubuntu 11.04.\r\nA versao do Ruby eh a 2.2.3 e do rails 4.2.4\r\nEm sua vasta
    experiencia, j[a viu algo parecido?\r\nGrande abraco!\r\nObrigado desde ja!"
---
<p>Fala galera, beleza?</p>

<p>Hoje estou aqui para ensinar como criar nosso primeiro projeto com o framework Ruby on Rails. Pra quem não sabe o que é Ruby on Rails pode conhecer um pouco mais <a title="Porque Usar um Framework?" href="{% post_url 2012-07-31-porque-usar-um-framework %}#ruby-on-rails-ref" target="_blank">aqui</a>.</p>

<p>Se você já conhece mas não tem instalado em sua máquina, veja <a title="Instalando e Configurando Ambiente Ruby on Rails no Linux (Ubuntu)" href="{% post_url 2012-08-23-instalando-e-configurando-ambiente-ruby-on-rails-no-linux %}" target="_blank">esse post</a> onde explico como preparar um ambiente Rails no Linux. Se você usa Windows, instale uma máquina virtual ou crie dual boot pois Rails roda melhor em sistemas unix-like (Unix, Linux, OS X).</p>

<a href="{{ site.baseurl }}/assets/primeiro-projeto-com-ruby-on-rails.jpg"><img class="alignnone size-full wp-image-588" title="primeiro-projeto-com-ruby-on-rails" src="{{ site.baseurl }}/assets/primeiro-projeto-com-ruby-on-rails.jpg" alt="primeiro-projeto-com-ruby-on-rails"/></a>

<h2>Iniciando projeto</h2>

<p>Primeiro de tudo vamos criar um projeto Rails, para isso abra o terminal, acesse a pasta onde ficará o projeto e digite o comando <code>rails new nome-do-projeto -d=mysql</code> (substitua "nome-do-projeto" pelo nome que você deseja dar).</p>

<p><a href="{{ site.baseurl }}/assets/criando-projeto-ruby-on-rails.jpg"><img class="alignnone size-full wp-image-556" title="criando-projeto-ruby-on-rails" src="{{ site.baseurl }}/assets/criando-projeto-ruby-on-rails.jpg" alt="criando-projeto-ruby-on-rails"/></a></p>

<div class="note">O argumento <code>-d=mysql</code> informa que o projeto usará banco de dados MySQL invés do SQLite que é padrão.</div>

<p>O Rails irá criar uma pasta com o nome do projeto (nesse caso <code>first-project</code>) dentro do diretório atual (<code>pwd</code>). Vamos acessar a pasta e iniciar o servidor para testar a aplicação. Use o comando <code>rails s</code> ou <code>rails server</code> para iniciar o servidor.</p>

<a href="{{ site.baseurl }}/assets/acessando-projeto-rails-e-iniciando-servidor.jpg"><img class="alignnone size-full wp-image-558" title="acessando-projeto-rails-e-iniciando-servidor" src="{{ site.baseurl }}/assets/acessando-projeto-rails-e-iniciando-servidor.jpg" alt="acessando-projeto-rails-e-iniciando-servidor"/></a>

<p>Observe que ao tentar inicar o servidor obtemos uma mensagem de erro dizendo que não foi possível encontrar um "manipulador" de JavaScript. Esse erro ocorre nessa versão do Rails (3.2.8), para resolver, precisamos acessar o arquivo <code>Gemfile</code> que está dentro da pasta do projeto e adicionar a gema <code>therubyracer</code> através do comando  <code>gem therubyracer</code> (linha 24), veja como ficará.</p>

<p><a href="{{ site.baseurl }}/assets/adicionando-gem-therubyracer-no-arquvio-gem.jpg"><img class="alignnone size-full wp-image-577" title="adicionando-gem-therubyracer-no-arquvio-gem" src="{{ site.baseurl }}/assets/adicionando-gem-therubyracer-no-arquvio-gem.jpg" alt="adicionando-gem-therubyracer-no-arquvio-gem"/></a></p>

<div class="note">Gems são como bibliotecas em nossos projetos, elas são códigos Ruby que podemos portar, muito efeciente. Veja mais em <a title="http://rubygems.org/" rel="external nofollow" href="http://rubygems.org/" target="_blank">http://rubygems.org/</a>.</div>

<p>O arquivo <code>Gemfile</code> diz ao Rails quais gems iremos usar, mas depois de definirmos precisamos baixar elas para nossa máquina, para isso execute o comando <code>bundle install</code> na pasta do projeto. Agora inicie o servidor (<code>rails s</code>) e veja que não teremos mais o erro, você deverá ver o <code>WEBrick</code> (servidor padrão do Rails) rodando como abaixo.</p>

<p><a href="{{ site.baseurl }}/assets/rodando-servidor-rails.jpg"><img class="alignnone size-full wp-image-560" title="rodando-servidor-rails" src="{{ site.baseurl }}/assets/rodando-servidor-rails.jpg" alt="rodando-servidor-rails"/></a></p>

<div class="note">Pressione <code>Ctrl+C</code> para desligar o servidor.</div>

<h2>Configurando banco de dados</h2>

<p>Dissemos ao Rails que usaremos banco de dados MySQL, mas precisamos dizer ainda qual a base de dados (<code>database</code>), usuário (<code>username</code>) e senha (<code>password</code>). Abra o arquivo <code>config/database.yml</code> e nas configurações de desenvolvimento defina os dados necessários.</p>

<p><a href="{{ site.baseurl }}/assets/configurando-banco-de-dados-no-database-yml.jpg"><img class="alignnone size-full wp-image-561" title="configurando-banco-de-dados-no-database-yml" src="{{ site.baseurl }}/assets/configurando-banco-de-dados-no-database-yml.jpg" alt="configurando-banco-de-dados-no-database-yml" width="394" height="634" /></a></p>

<div class="note">Observe que temos configurações de banco de dados para três ambientes: desenvolvimento, teste e produção. Por enquanto trabalharemos apenas com desenvolvimento (<code>development</code>).</div>

<p>Precisamos criar o banco no MySQL ainda, para isso execute o comando <code>rake db:create</code> no terminal.</p>

<a href="{{ site.baseurl }}/assets/criando-banco-de-dados-com-comando-rake-db-create.jpg"><img class="alignnone size-full wp-image-564" title="criando-banco-de-dados-com-comando-rake-db-create" src="{{ site.baseurl }}/assets/criando-banco-de-dados-com-comando-rake-db-create.jpg" alt="criando-banco-de-dados-com-comando-rake-db-create" /></a>

<p>Com isso já temos nosso projeto no ponto para começarmos a desenvolver, agora inicie o servidor novamente, abra o navegador e acesse <code>http://0.0.0.0:3000/</code> para ver a tela de boas vindas do Rails.</p>

<p><a href="{{ site.baseurl }}/assets/tela-de-boas-vindas-do-ruby-on-rails.jpg"><img class="alignnone size-full wp-image-565" title="tela-de-boas-vindas-do-ruby-on-rails" src="{{ site.baseurl }}/assets/tela-de-boas-vindas-do-ruby-on-rails.jpg" alt="tela-de-boas-vindas-do-ruby-on-rails" /></a></p>

<div class="note">Essa é a tela padrão de boas vindas que se encontra em <code>public/index.html</code>.</div>

<p>Pare o servidor (<code>Ctrl+C</code>) e exclua essa página (<code>rm public/index.html</code>) pois não precisaremos mais dela (ela só serve para dizer que o Rails está rodando ok).</p>

<h2>Definindo rota raiz</h2>

<p>Vamos dizer ao Rails qual é a nossa rota raiz, abra o arquivo <code>config/routes.rb</code> e descomente (remova o <code>#</code> da frente) a linha <code>root :to =&gt; 'welcome#index'</code> e substitua <code>welcome</code> por <code>home</code> ficando assim.</p>

<a href="{{ site.baseurl }}/assets/arquivo-de-rotas-do-rails.jpg"><img class="alignnone size-full wp-image-568" title="arquivo-de-rotas-do-rails" src="{{ site.baseurl }}/assets/arquivo-de-rotas-do-rails.jpg" alt="arquivo-de-rotas-do-rails" /></a>

<p>Agora toda vez que acessarmos a url raiz de nosso site (<code>http://localhost:3000</code>) seremos mapeados para o controller <code>home</code> e action <code>index</code>.</p>

<h2>Olá mundo</h2>

<p>Se acessarmos nosso projeto pelo navegador agora teremos problemas pois o Rails não irá encontrar nosso controller e action definidos no <code>routes.rb</code>, vamos criar eles. Digite <code>rails g controller home index</code> no terminal.</p>

<p><a href="{{ site.baseurl }}/assets/gerando-controller-rails.jpg"><img class="alignnone size-full wp-image-570" title="gerando-controller-rails" src="{{ site.baseurl }}/assets/gerando-controller-rails.jpg" alt="gerando-controller-rails"/></a></p>

<div class="note">Esse <code>rails g</code> vem de <code>rails generate</code>, podemos usar ele para criar controllers, models, views etc.. Para saber mais digite <code>rails g --help</code>.</div>

<p>Se você olhar na pasta <code>app/controllers/</code> e <code>app/views/home/</code> verá que temos nosso controller e view criados em seus respectivos locais.</p>

<a href="{{ site.baseurl }}/assets/controller-e-view-rails.jpg"><img class="alignnone size-full wp-image-571" title="controller-e-view-rails" src="{{ site.baseurl }}/assets/controller-e-view-rails.jpg" alt="controller-e-view-rails" /></a>

<p>Para finalizar, vamos criar uma variável de instância na action do controller e exibir na view, abra o <code>app/controllers/home_controller.rb</code> e adicione o comando <code>@welcome = 'sejam bem vindos'</code> dentro da action <code>index</code>.</p>

<a href="{{ site.baseurl }}/assets/definindo-variavel-no-controller-rails.jpg"><img class="alignnone size-full wp-image-573" title="definindo-variavel-no-controller-rails" src="{{ site.baseurl }}/assets/definindo-variavel-no-controller-rails.jpg" alt="definindo-variavel-no-controller-rails" /></a>

<p>Toda variável de instância começa com <code>@</code> no Ruby e elas sempre são enviadas para a view no Rails, portanto se criarmos qualquer variável com <code>@</code> no controller ela estará disponível na view.</p>

<p>Abra a view <code>app/views/home/index.html.erb</code> e vamos exibir o valor definido no controller junto com uma mensagem de olá, veja.</p>

<p><a href="{{ site.baseurl }}/assets/exibindo-variavel-na-view-rails.jpg"><img class="alignnone size-full wp-image-574" title="exibindo-variavel-na-view-rails" src="{{ site.baseurl }}/assets/exibindo-variavel-na-view-rails.jpg" alt="exibindo-variavel-na-view-rails" /></a></p>

<div class="note"><code>&lt;%=</code> inicia a tag do Ruby e já exibe o que estiver na frente (como se fosse <code>&lt;?php echo</code> do PHP). Para código que não precisa de output usa-se apenas <code>&lt;%</code>.</div>

<p>Feito isso inicie o servidor e acesse o projeto no navegador em <code>http://localhost:3000</code> e já veremos nosso <code>olá mundo</code>.</p>

<a href="{{ site.baseurl }}/assets/ola-mundo-ruby-on-rails.jpg"><img class="alignnone size-full wp-image-575" title="ola-mundo-ruby-on-rails" src="{{ site.baseurl }}/assets/ola-mundo-ruby-on-rails.jpg" alt="ola-mundo-ruby-on-rails" /></a>

<h2>Conclusão</h2>

<p>Por enquanto é só pessoal, hoje aprendemos:</p>

<ul>
  <li>criar um projeto Rails</li>
  <li>conceito de gems</li>
  <li>definir rota raiz</li>
  <li>gerar controller através do <code>rails g</code></li>
  <li>variáveis de instância</li>
  <li>exibir conteúdo nas views</li>
</ul>

<p>Em breve teremos mais conteúdo de Rails.. O que vocês acharam?</p>

<p>Até mais.</p>
