---
layout: post
status: publish
published: true
title: Embelezando Outputs com a Gem Awesome Print
author:
  display_name: Glauco Custódio
date: '2013-01-19 14:18:47 -0200'
date_gmt: '2013-01-19 14:18:47 -0200'
categories:
- Ruby
tags:
- ruby on rails
comments: []
---
<p>Hoje venho apresentar a vocês - que ainda não conhecem, uma gem muito útil para inspeção de objetos e outras estruturas de dados como array e hash no Ruby.</p>

<p>Vamos supor que tenhamos uma variável contendo o seguinte conteúdo:</p>

{% highlight ruby %}
my_array = [1, 'dois', DateTime.now(), [3, 'quatro', 0.2]]
{% endhighlight %}

<p>Se precisarmos exibir o valor dela no terminal por algum motivo e usarmos o tradicional <code>puts</code>, ou seu primo <code>p</code> para isso, obteremos um output não muito legível, veja como ficaria:</p>

<a href="{{ site.baseurl }}/assets/exibindo-valores-no-terminal.png"><img class="alignnone size-full wp-image-1120" title="exibindo-valores-no-terminal" src="{{ site.baseurl }}/assets/exibindo-valores-no-terminal.png" alt="exibindo-valores-no-terminal"/></a>

<p>Observe que o array interno está sendo exibindo no mesmo nível que os outros valores, além do que a colorização não ajuda muito.</p>

<p>Imagina quando estamos inspecionando valores no Rails por exemplo, temos tantas saídas sendo exibidas no terminal quando fazemos uma requisição, que fica até difícil encontrar o valor que precisamos no meio de tanta informação.</p>

<h2>A Solução</h2>

<p>Ainda bem que existe a gem <a href="https://github.com/michaeldv/awesome_print" rel="external nofollow" target="_blank">Awesome Print</a>, ela nos ajuda muito nesse processo de inspeção.</p>

<p>Instale em sua máquina rodando <code>gem install awesome_print</code>, faça a importação no IRB <code>require 'ap'</code> e seja feliz usando <code>ap</code> invés de <code>puts</code>/<code>p</code>, veja:</p>

<a href="{{ site.baseurl }}/assets/embelezando-outputs-com-a-gem-awesome-print.jpg"><img class="alignnone size-full wp-image-1124" title="embelezando-outputs-com-a-gem-awesome-print" src="{{ site.baseurl }}/assets/embelezando-outputs-com-a-gem-awesome-print.jpg" alt="embelezando-outputs-com-a-gem-awesome-print"/></a>

<p>Temos uma saída muito mais clara, identada e colorida!</p>

<div class="note">Você pode incluir <code>gem 'awesome_print', :require =&gt; 'ap'</code> no <code>Gemfile</code> em seu projeto Rails para já fazer o require automaticamente.</div>

<h2>Customização</h2>

<p>Essa gem também permite a customização do output através do hash <code>options</code>, basta informar as configurações desejadas como no exemplo abaixo:</p>

<a href="{{ site.baseurl }}/assets/customizando-saidas-com-awesome-print.jpg"><img class="alignnone size-full wp-image-1126" title="customizando-saidas-com-awesome-print" src="{{ site.baseurl }}/assets/customizando-saidas-com-awesome-print.jpg" alt="customizando-saidas-com-awesome-print"/></a>

<p>Aqui, defino 2 espaços para identação e mudo a cor de strings para vermelho. Outras opções de customização podem ser vistas <a href="https://github.com/michaeldv/awesome_print#usage" rel="external nofollow" target="_blank">aqui</a>.</p>

<h2>Integração com IRB</h2>

<p>Para não ter que ficar importando a gem toda hora quando acessar o IRB ao abrir o terminal, você pode definir ela como formatador padrão, basta criar um arquivo chamado <code>.irbrc</code> no diretório home (<code>~/</code>) e adicionar o conteúdo:</p>

{% highlight bash %}
require "awesome_print"
AwesomePrint.irb!
{% endhighlight %}

<p>Recarregue o IRB e pronto! Toda vez que você usar o <code>p</code> terá uma saída incrivelmente bonita ;).</p>

<a href="{{ site.baseurl }}/assets/gem-awesome-print-integrada-ao-irb.jpg"><img class="alignnone size-full wp-image-1131" title="gem-awesome-print-integrada-ao-irb" src="{{ site.baseurl }}/assets/gem-awesome-print-integrada-ao-irb.jpg" alt="gem-awesome-print-integrada-ao-irb"/></a>

<p>Essa foi a dica de hoje, o que acharam?</p>

<p>Até mais.</p>
