---
layout: post
status: publish
published: true
title: Cuidado com o LocaleMiddleware do Django
author:
  display_name: Glauco Custódio
date: '2013-09-07 14:56:08 -0300'
date_gmt: '2013-09-07 14:56:08 -0300'
categories:
- Python
tags:
- django
comments: []
---
<p>Depois de um tempo sem falar sobre Python/Django estou aqui de volta..</p>

<p>Estava trabalhando em um projeto Django hoje e me deparei com uma situação recorrente que gostaria de compartilhar.</p>

<p>Como <a href="https://docs.djangoproject.com/en/1.1/topics/i18n/deployment/" rel="external nofollow" target="_blank">está na documentação do projeto</a>, o Django possui uma configuração para definirmos o idioma a ser utilizado em toda instalação através da variável <code>LANGUAGE_CODE</code>, por padrão ela vem setada como "en-us", mas podemos alterá-la segundo nossa preferência (como "pt-br" para português do Brasil).</p>

<p>Até aqui tudo bem, só devemos tomar cuidado se nosso projeto possui o <code style="font-style: inherit;">django.middleware.locale.LocaleMiddleware</code> ativo na tupla <code>MIDDLEWARE_CLASSES</code> no arquivo <code>settings.py</code>.</p>

<p>Caso esteja, o Django irá tentar usar o idioma de preferência do usuário baseado nas requisições, ou seja, se o usuário usar idioma inglês por exemplo e o Django tiver esse idioma então será utilizado ele.</p>

<p>Esse recurso é bom, mas as vezes queremos fixar um idioma sem levar em conta preferências dos usuários, para isso basta garantir que o <code>LocaleMiddleware</code> não está entre os middlewares do projeto.</p>

<p>Até mais.</p>
